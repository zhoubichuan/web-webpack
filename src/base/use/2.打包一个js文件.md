---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---
# webpack-打包一个js文件
## 1.搭建环境

### 1.新建项目文件夹

```
mkdir webpack-eg
```

### 2.进入项目文件夹

```
cd webpack-eg
```

### 3.初始化项目

```
npm init -y
```

### 4.安装 webpack 依赖包

从 webpack4.0 开始需要同时安装 webpack-cli,打包工具上线后不需要所以为开发依赖

```
npm i webpack webpack-cli -D
```

## 2.设置配置文件

### 1.新建 webpack.config.js

```
const path = require("path");
module.exports = {
  //入口，可以是相对路径
  entry: "./src/index.js",
  //输出的文件夹，只能是绝对路径
  output: {
    path: path.join(__dirname, "dist"),
    //打包后的文件名
    filename: "bundle.js"
  }
};
```

### 2.新建要打包的文件 index.js

新建一个 src 文件夹，下面新建一个 index.js

```
consoel.log('hello')
```

## 3.运行打包命令

### 1.第一种方式是通过配置 package.json 中的 script "build"

package.json

```
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
```

* 修改后

```
"scripts": {
    "build": "webpack --mode development"
  },
```

#### 从 webpack4.0 开始 webpack 后面需要加 --mode 指定是生产模式（production）还是开发模式（development）;

开发模式更加符合开发方式，日志调试等功能更加全面，生产模式更加符合生产要求，加密压缩等功能使代码更安全性能更高。

* 运行

```
npm run build
```

### 2.第二种方式是通过 npx

可以直接运行 node_modules/.bin 目录下的命令

```
npx webpack
```

## 4.打包后的文件

打包后项目生成一个 dist 文件夹，下面有一个 bundle.js

```
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){console.log("hello"),document.getElementById("app").innerHTML="123"}]);
```

[完整代码](https://github.com/zhoubichuan/frontend-note/blob/master/3.dev/3.scaffolding/1.webpack/1.base/2.js/)
